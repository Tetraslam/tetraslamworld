@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Dungeon-SAO fusion colors */
    --background: 222 47% 5%;      /* #050A14 Deep dungeon void */
    --foreground: 34 100% 85%;     /* #FFD7A6 Torch light */
    --primary: 34 100% 65%;        /* #FFB04D Ancient runes */
    --primary-foreground: 222 47% 5%;
    --secondary: 276 90% 60%;      /* #9D33EA Magic essence */
    --secondary-foreground: 34 100% 85%;
    --accent: 187 92% 69%;         /* #4EEAF6 Crystal energy */
    --accent-foreground: 222 47% 5%;
    --muted: 222 47% 12%;          /* #121B2F Stone walls */
    --muted-foreground: 34 30% 65%;
    --border: 34 100% 65%;         /* #FFB04D Ancient markings */
    --input: 222 47% 12%;
    --ring: 34 100% 65%;
    --card: 222 47% 8%;            /* #0A1220 Dungeon walls */
    --card-foreground: 34 100% 85%;
    --popover: 222 47% 7%;         /* #080F1B Shadow depths */
    --popover-foreground: 34 100% 85%;
    
    /* Dungeon status effects */
    --health: 0 100% 65%;          /* #FF4D4D Life force */
    --mana: 199 100% 74%;          /* #47E3FF Magic power */
    --experience: 276 90% 60%;     /* #9D33EA Soul essence */
    --poison: 158 100% 49%;        /* #05C27B Corruption */
    --rare: 34 100% 65%;          /* #FFB04D Ancient treasure */
    --legendary: 187 92% 69%;      /* #4EEAF6 Mythical artifact */
  }
}

/* Base Layer Styles */
@layer base {
  * {
    @apply border-border;
}

body {
    @apply bg-background text-foreground;
    background-image: 
      /* Stone texture */
      url("data:image/svg+xml,%3Csvg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h8v8H0V0zm8 8h8v8H8V8zm16-8h8v8h-8V0zm8 8h8v8h-8V8zM0 16h8v8H0v-8zm32 0h-8v8h8v-8zM16 16h8v8h-8v-8zM8 24h8v8H8v-8zm16 0h8v8h-8v-8z' fill='%23FFB04D' fill-opacity='0.03'/%3E%3C/svg%3E"),
      /* Ancient runes */
      url("data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 48 48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 0v4h4v4h4v4h4v4h4v4h4v4h-4v4h-4v4h-4v4h-4v4h-4v4h-4v-4h-4v-4h-4v-4h-4v-4H8v-4H4v-4h4v-4h4v-4h4v-4h4V8h4V4h4V0z' fill='%239D33EA' fill-opacity='0.02'/%3E%3C/svg%3E"),
      /* Torch glow */
      radial-gradient(
        circle at 0% 0%,
        hsl(34 100% 12% / 0.4),
        transparent 50%
      ),
      radial-gradient(
        circle at 100% 0%,
        hsl(34 100% 12% / 0.4),
        transparent 50%
      ),
      /* Magic essence */
      radial-gradient(
        circle at 50% 100%,
        hsl(276 90% 12% / 0.4),
        transparent 70%
      ),
      /* Dungeon base */
      linear-gradient(
        180deg,
        hsl(222 47% 8%),
        hsl(222 47% 3%)
      );
    image-rendering: pixelated;
    text-shadow: 0 0 8px rgba(255, 176, 77, 0.4);
    letter-spacing: 0.5px;
  }

  /* Dungeon Borders */
  .pixel-corners {
    clip-path: polygon(
      0 4px,
      2px 4px,
      2px 2px,
      4px 2px,
      4px 0,
      calc(100% - 4px) 0,
      calc(100% - 4px) 2px,
      calc(100% - 2px) 2px,
      calc(100% - 2px) 4px,
      100% 4px,
      100% calc(100% - 4px),
      calc(100% - 2px) calc(100% - 4px),
      calc(100% - 2px) calc(100% - 2px),
      calc(100% - 4px) calc(100% - 2px),
      calc(100% - 4px) 100%,
      4px 100%,
      4px calc(100% - 2px),
      2px calc(100% - 2px),
      2px calc(100% - 4px),
      0 calc(100% - 4px)
    );
  }

  .pixel-border {
    position: relative;
    border: 2px solid hsl(var(--border));
    box-shadow: 
      inset 2px 2px 0 rgba(255, 176, 77, 0.15),
      inset -2px -2px 0 rgba(0, 0, 0, 0.25),
      0 0 20px rgba(255, 176, 77, 0.2);
  }

  .pixel-border::before {
    content: '';
    position: absolute;
    inset: 0;
    background: 
      linear-gradient(
        90deg,
        transparent 50%,
        rgba(255, 176, 77, 0.1) 50%
      ) 0 0/4px 4px;
    pointer-events: none;
    opacity: 0.5;
    animation: torch-flicker 4s ease-in-out infinite;
  }

  /* Ancient Magic Interface */
  .pixel-border-magic {
    position: relative;
    border: 2px solid hsl(var(--primary));
    background: linear-gradient(
      135deg,
      rgba(255, 176, 77, 0.1),
      transparent 50%,
      rgba(157, 51, 234, 0.1)
    );
    box-shadow: 
      inset 2px 2px 0 rgba(255, 176, 77, 0.2),
      inset -2px -2px 0 rgba(0, 0, 0, 0.4),
      0 0 20px rgba(255, 176, 77, 0.3);
    animation: ancient-pulse 4s ease-in-out infinite;
  }

  .pixel-border-magic::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: 
      linear-gradient(90deg, transparent 25%, hsl(var(--primary)) 25%, hsl(var(--primary)) 27%, transparent 27%) 0 0/16px 16px,
      linear-gradient(0deg, transparent 25%, hsl(var(--primary)) 25%, hsl(var(--primary)) 27%, transparent 27%) 0 0/16px 16px;
    opacity: 0.15;
    mask-image: linear-gradient(45deg, black 50%, transparent 50%);
    pointer-events: none;
    animation: rune-pulse 3s ease-in-out infinite;
  }

  .pixel-border-magic::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      45deg,
      transparent 40%,
      rgba(255, 176, 77, 0.4) 45%,
      transparent 50%
    );
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
  }

  .pixel-border-magic:hover::after {
    opacity: 1;
  }
}

/* Dungeon Animations */
@keyframes float {
  0%, 100% { 
    transform: translateY(0) rotate(0deg); 
    filter: drop-shadow(0 4px 8px rgba(255, 176, 77, 0.2));
  }
  50% { 
    transform: translateY(-4px) rotate(0.5deg);
    filter: drop-shadow(0 8px 16px rgba(255, 176, 77, 0.3));
  }
}

@keyframes torch-flicker {
  0%, 100% { opacity: 0.5; }
  25% { opacity: 0.4; }
  50% { opacity: 0.6; }
  75% { opacity: 0.45; }
}

@keyframes ancient-pulse {
  0%, 100% {
    box-shadow: 
      inset 2px 2px 0 rgba(255, 176, 77, 0.2),
      inset -2px -2px 0 rgba(0, 0, 0, 0.4),
      0 0 20px rgba(255, 176, 77, 0.3);
  }
  50% {
    box-shadow: 
      inset 2px 2px 0 rgba(255, 176, 77, 0.3),
      inset -2px -2px 0 rgba(0, 0, 0, 0.4),
      0 0 30px rgba(255, 176, 77, 0.4);
  }
}

@keyframes rune-pulse {
  0%, 100% { 
    opacity: 0.15;
    transform: scale(1);
  }
  50% { 
    opacity: 0.25;
    transform: scale(1.02);
  }
}

@keyframes materialize {
  0% {
    opacity: 0;
    transform: scale(0.8) translateY(10px);
    filter: brightness(0.5) blur(4px);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.05) translateY(-5px);
    filter: brightness(1.2) blur(2px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: brightness(1) blur(0);
  }
}

/* Dungeon Component Styles */
.card-base {
  @apply pixel-corners pixel-border bg-card;
  transform-style: preserve-3d;
  transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(12px);
  background: linear-gradient(
    135deg,
    rgba(255, 176, 77, 0.05),
    transparent 50%,
    rgba(157, 51, 234, 0.05)
  );
}

.card-base::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(
      90deg,
      transparent 50%,
      rgba(255, 176, 77, 0.1) 50%
    ) 0 0/4px 4px;
  opacity: 0;
  transition: opacity 0.3s ease;
  animation: torch-flicker 4s ease-in-out infinite;
}

.card-base::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at 50% 0%,
    rgba(255, 176, 77, 0.1),
    transparent 70%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
}

.card-base:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 
    0 8px 24px rgba(0, 0, 0, 0.5),
    0 0 20px rgba(255, 176, 77, 0.3);
}

.card-base:hover::before,
.card-base:hover::after {
  opacity: 1;
}

/* Dungeon Button Styles */
.button-base {
  @apply pixel-corners pixel-border-magic;
  transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  position: relative;
  background: linear-gradient(
    to bottom,
    hsl(var(--secondary)) 0%,
    hsl(var(--muted)) 100%
  );
  transform-style: preserve-3d;
}

.button-base::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(
      90deg,
      transparent 50%,
      rgba(255, 176, 77, 0.1) 50%
    ) 0 0/4px 4px;
  opacity: 0;
  transition: opacity 0.3s ease;
  animation: torch-flicker 4s ease-in-out infinite;
}

.button-base:hover {
  filter: brightness(1.3) contrast(1.1);
  transform: translateY(-2px) scale(1.05);
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.5),
    0 0 20px rgba(255, 176, 77, 0.4);
}

.button-base:hover::before {
  opacity: 1;
}

.button-base:active {
  transform: translateY(1px) scale(0.98);
  filter: brightness(0.9);
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.5),
    0 0 12px rgba(255, 176, 77, 0.3);
}

/* Dungeon HoverCard Styles */
.hover-card {
  @apply pixel-corners;
  background: linear-gradient(
    135deg,
    hsl(var(--popover)) 0%,
    hsl(var(--card)) 100%
  );
  border: 2px solid hsl(var(--primary));
  box-shadow: 
    0 8px 24px rgba(0, 0, 0, 0.5),
    0 0 20px rgba(255, 176, 77, 0.3);
  backdrop-filter: blur(16px);
  animation: materialize 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.hover-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    linear-gradient(
      90deg,
      transparent 50%,
      rgba(255, 176, 77, 0.1) 50%
    ) 0 0/4px 4px;
  opacity: 0.5;
  animation: torch-flicker 4s ease-in-out infinite;
}

.hover-card-content {
  @apply p-4;
  border: 2px solid hsl(var(--primary));
  background: linear-gradient(
    135deg,
    rgba(255, 176, 77, 0.05),
    transparent 50%,
    rgba(157, 51, 234, 0.05)
  );
  box-shadow: 
    inset 2px 2px 0 rgba(255, 176, 77, 0.1),
    inset -2px -2px 0 rgba(0, 0, 0, 0.25);
  position: relative;
  overflow: hidden;
}

.hover-card-arrow {
  @apply fill-primary;
  filter: drop-shadow(0 0 8px rgba(255, 176, 77, 0.4));
}

/* Dungeon Status Effects */
.health-text { 
  color: hsl(var(--health));
  text-shadow: 0 0 8px rgba(255, 77, 77, 0.5);
  font-family: 'Press Start 2P', monospace;
}

.mana-text { 
  color: hsl(var(--mana));
  text-shadow: 0 0 8px rgba(71, 227, 255, 0.5);
  font-family: 'Press Start 2P', monospace;
}

.experience-text { 
  color: hsl(var(--experience));
  text-shadow: 0 0 8px rgba(157, 51, 234, 0.5);
  font-family: 'Press Start 2P', monospace;
}

.poison-text { 
  color: hsl(var(--poison));
  text-shadow: 0 0 8px rgba(5, 194, 123, 0.5);
  font-family: 'Press Start 2P', monospace;
}

.rare-text { 
  color: hsl(var(--rare));
  text-shadow: 0 0 8px rgba(255, 176, 77, 0.5);
  font-family: 'Press Start 2P', monospace;
}

.legendary-text { 
  color: hsl(var(--legendary));
  text-shadow: 0 0 8px rgba(78, 234, 246, 0.5);
  font-family: 'Press Start 2P', monospace;
}

/* Dungeon Status Indicators */
.status-effect {
  position: relative;
  padding: 4px 8px;
  font-family: 'Press Start 2P', monospace;
  font-size: 12px;
  line-height: 1;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid currentColor;
  border-radius: 0;
  clip-path: polygon(
    0 2px,
    2px 2px,
    2px 0,
    calc(100% - 2px) 0,
    calc(100% - 2px) 2px,
    100% 2px,
    100% calc(100% - 2px),
    calc(100% - 2px) calc(100% - 2px),
    calc(100% - 2px) 100%,
    2px 100%,
    2px calc(100% - 2px),
    0 calc(100% - 2px)
  );
}

.status-effect::before {
  content: '';
  position: absolute;
  top: -1px;
  left: -1px;
  right: -1px;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent,
    currentColor,
    transparent
  );
  animation: torch-flicker 4s ease-in-out infinite;
}

/* Dungeon Navigation */
.nav-link {
  position: relative;
  padding: 8px 16px;
  color: hsl(var(--foreground));
  text-shadow: 0 0 8px rgba(255, 176, 77, 0.4);
  transition: all 0.3s ease;
  font-family: 'Press Start 2P', monospace;
  font-size: 14px;
}

.nav-link::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: hsl(var(--primary));
  transform: scaleX(0);
  transform-origin: right;
  transition: transform 0.3s ease;
}

.nav-link:hover {
  color: hsl(var(--primary));
}

.nav-link:hover::before {
  transform: scaleX(1);
  transform-origin: left;
}

/* Dungeon Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--background));
  border: 2px solid hsl(var(--border));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--primary));
  border: 2px solid hsl(var(--background));
  clip-path: polygon(
    0 2px,
    2px 2px,
    2px 0,
    calc(100% - 2px) 0,
    calc(100% - 2px) 2px,
    100% 2px,
    100% calc(100% - 2px),
    calc(100% - 2px) calc(100% - 2px),
    calc(100% - 2px) 100%,
    2px 100%,
    2px calc(100% - 2px),
    0 calc(100% - 2px)
  );
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--secondary));
}

/* Dungeon Selection */
::selection {
  background: hsl(var(--primary) / 0.3);
  color: hsl(var(--foreground));
  text-shadow: 0 0 8px rgba(255, 176, 77, 0.6);
}
